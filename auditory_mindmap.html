<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auditory System ‚Äî Interactive Mindmap</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Outfit:wght@300;400;600;700;900&display=swap');

  :root {
    --bg: #050a14;
    --surface: #0d1525;
    --surface2: #111e33;
    --border: #1e3a5f;
    --primary: #00d4ff;
    --secondary: #7c3aed;
    --accent1: #ff6b35;
    --accent2: #00ff88;
    --accent3: #ffd700;
    --accent4: #ff3d9a;
    --accent5: #4ecdc4;
    --text: #e2eaf8;
    --text-dim: #7a93b8;
    --glow: rgba(0,212,255,0.3);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Outfit', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Background grid */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,212,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,212,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  header {
    position: relative;
    z-index: 10;
    text-align: center;
    padding: 48px 24px 32px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(0,212,255,0.05) 0%, transparent 100%);
  }

  header h1 {
    font-family: 'Outfit', sans-serif;
    font-weight: 900;
    font-size: clamp(2rem, 5vw, 3.5rem);
    letter-spacing: -1px;
    background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: none;
    filter: drop-shadow(0 0 30px rgba(0,212,255,0.4));
  }

  header p {
    margin-top: 10px;
    font-size: 0.9rem;
    color: var(--text-dim);
    font-family: 'Space Mono', monospace;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .instructions {
    display: flex;
    gap: 24px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 20px;
  }

  .instructions span {
    font-size: 0.78rem;
    color: var(--text-dim);
    font-family: 'Space Mono', monospace;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .instructions span::before {
    content: '';
    width: 8px; height: 8px;
    border-radius: 50%;
    background: var(--primary);
    display: inline-block;
    box-shadow: 0 0 8px var(--primary);
  }

  /* Search */
  .search-bar {
    position: relative;
    z-index: 10;
    display: flex;
    justify-content: center;
    padding: 20px 24px 0;
  }

  .search-bar input {
    width: min(500px, 100%);
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 40px;
    padding: 12px 20px 12px 44px;
    color: var(--text);
    font-family: 'Outfit', sans-serif;
    font-size: 0.9rem;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .search-bar input:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(0,212,255,0.1);
  }

  .search-bar .search-icon {
    position: absolute;
    left: calc(50% - 218px);
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-dim);
    font-size: 1rem;
    pointer-events: none;
  }

  /* Controls */
  .controls {
    position: relative;
    z-index: 10;
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
    padding: 16px 24px 8px;
  }

  .btn {
    padding: 7px 18px;
    border-radius: 20px;
    border: 1px solid var(--border);
    background: var(--surface);
    color: var(--text-dim);
    font-family: 'Outfit', sans-serif;
    font-size: 0.82rem;
    cursor: pointer;
    transition: all 0.2s;
    font-weight: 500;
  }

  .btn:hover {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(0,212,255,0.06);
  }

  .btn.active {
    border-color: var(--primary);
    color: var(--primary);
    background: rgba(0,212,255,0.1);
    box-shadow: 0 0 12px rgba(0,212,255,0.2);
  }

  /* Main content */
  .mindmap-container {
    position: relative;
    z-index: 5;
    max-width: 1400px;
    margin: 0 auto;
    padding: 30px 20px 60px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 16px;
    align-items: start;
  }

  /* Node cards */
  .node {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    transition: transform 0.2s, box-shadow 0.2s;
    position: relative;
  }

  .node:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 40px rgba(0,0,0,0.5);
  }

  .node.hidden { display: none; }

  .node-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 18px;
    cursor: pointer;
    user-select: none;
    position: relative;
  }

  .node-icon {
    width: 36px; height: 36px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    flex-shrink: 0;
  }

  .node-title {
    font-weight: 700;
    font-size: 0.95rem;
    flex: 1;
    line-height: 1.3;
  }

  .toggle-btn {
    width: 24px; height: 24px;
    border-radius: 50%;
    border: 1px solid rgba(255,255,255,0.15);
    background: rgba(255,255,255,0.05);
    color: var(--text-dim);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    transition: transform 0.3s, background 0.2s;
    flex-shrink: 0;
  }

  .node.open .toggle-btn {
    transform: rotate(180deg);
    background: rgba(255,255,255,0.1);
  }

  .node-body {
    display: none;
    padding: 0 18px 18px;
    border-top: 1px solid var(--border);
    background: rgba(0,0,0,0.2);
  }

  .node.open .node-body { display: block; }

  /* Sub-sections */
  .sub-section {
    margin-top: 14px;
  }

  .sub-title {
    font-size: 0.78rem;
    font-family: 'Space Mono', monospace;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--text-dim);
    margin-bottom: 8px;
    padding-top: 2px;
  }

  /* Fact pills */
  .facts {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .fact {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.07);
    border-left: 3px solid var(--accent-color, var(--primary));
    border-radius: 8px;
    padding: 8px 12px;
    font-size: 0.84rem;
    line-height: 1.5;
    color: var(--text);
    transition: background 0.15s;
  }

  .fact:hover {
    background: rgba(255,255,255,0.07);
  }

  .fact strong {
    color: var(--primary);
    font-weight: 600;
  }

  .fact .highlight {
    color: var(--accent3);
    font-weight: 600;
  }

  /* Tags */
  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 10px;
  }

  .tag {
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    font-family: 'Space Mono', monospace;
  }

  /* Color themes per section */
  .theme-blue { --accent-color: #00d4ff; }
  .theme-purple { --accent-color: #7c3aed; }
  .theme-orange { --accent-color: #ff6b35; }
  .theme-green { --accent-color: #00ff88; }
  .theme-yellow { --accent-color: #ffd700; }
  .theme-pink { --accent-color: #ff3d9a; }
  .theme-teal { --accent-color: #4ecdc4; }
  .theme-red { --accent-color: #ff4757; }

  .theme-blue .node-header { border-left: 4px solid #00d4ff; }
  .theme-purple .node-header { border-left: 4px solid #7c3aed; }
  .theme-orange .node-header { border-left: 4px solid #ff6b35; }
  .theme-green .node-header { border-left: 4px solid #00ff88; }
  .theme-yellow .node-header { border-left: 4px solid #ffd700; }
  .theme-pink .node-header { border-left: 4px solid #ff3d9a; }
  .theme-teal .node-header { border-left: 4px solid #4ecdc4; }
  .theme-red .node-header { border-left: 4px solid #ff4757; }

  .theme-blue .node-icon { background: rgba(0,212,255,0.12); }
  .theme-purple .node-icon { background: rgba(124,58,237,0.15); }
  .theme-orange .node-icon { background: rgba(255,107,53,0.12); }
  .theme-green .node-icon { background: rgba(0,255,136,0.1); }
  .theme-yellow .node-icon { background: rgba(255,215,0,0.1); }
  .theme-pink .node-icon { background: rgba(255,61,154,0.12); }
  .theme-teal .node-icon { background: rgba(78,205,196,0.12); }
  .theme-red .node-icon { background: rgba(255,71,87,0.12); }

  .theme-blue .node-title { color: #00d4ff; }
  .theme-purple .node-title { color: #9d5cf0; }
  .theme-orange .node-title { color: #ff6b35; }
  .theme-green .node-title { color: #00ff88; }
  .theme-yellow .node-title { color: #ffd700; }
  .theme-pink .node-title { color: #ff3d9a; }
  .theme-teal .node-title { color: #4ecdc4; }
  .theme-red .node-title { color: #ff4757; }

  /* Highlight match */
  mark {
    background: rgba(255,215,0,0.3);
    color: var(--accent3);
    border-radius: 3px;
    padding: 0 2px;
  }

  /* Number badges */
  .num-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px; height: 20px;
    border-radius: 50%;
    font-size: 0.65rem;
    font-weight: 700;
    margin-right: 4px;
    flex-shrink: 0;
  }

  /* Pathway visualization */
  .pathway {
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 10px;
    padding: 10px;
    background: rgba(0,0,0,0.3);
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.06);
  }

  .pathway-step {
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    white-space: nowrap;
  }

  .pathway-arrow {
    color: var(--text-dim);
    font-size: 0.8rem;
  }

  /* Progress indicator */
  .node-count {
    text-align: center;
    font-family: 'Space Mono', monospace;
    font-size: 0.72rem;
    color: var(--text-dim);
    padding: 4px 0 16px;
    position: relative;
    z-index: 10;
  }

  /* Divider line in body */
  .divider {
    height: 1px;
    background: var(--border);
    margin: 12px 0;
  }

  /* Two-column grid inside node */
  .grid-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
  }

  /* Scroll to top */
  .scroll-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 44px; height: 44px;
    border-radius: 50%;
    background: var(--primary);
    color: var(--bg);
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100;
    box-shadow: 0 4px 20px rgba(0,212,255,0.4);
    transition: transform 0.2s;
  }
  .scroll-top:hover { transform: scale(1.1); }
  .scroll-top.visible { display: flex; }

  /* No results */
  .no-results {
    grid-column: 1/-1;
    text-align: center;
    padding: 60px;
    color: var(--text-dim);
    font-family: 'Space Mono', monospace;
    font-size: 0.9rem;
    display: none;
  }

  /* Span full width */
  .full-width { grid-column: 1 / -1; }

  @media (max-width: 700px) {
    .mindmap-container { grid-template-columns: 1fr; }
    .search-bar .search-icon { left: 22px; }
    .search-bar input { padding-left: 36px; }
  }
</style>
</head>
<body>

<header>
  <h1>üß† Auditory System</h1>
  <p>Introduction to Neuroscience ¬∑ Week 5 ¬∑ Mohammad Darainy</p>
  <div class="instructions">
    <span>Click any card to expand</span>
    <span>Search to filter topics</span>
    <span>Use buttons to expand all</span>
  </div>
</header>

<div class="search-bar">
  <span class="search-icon">üîç</span>
  <input type="text" id="searchInput" placeholder="Search any topic, term, or fact..." oninput="filterNodes()">
</div>

<div class="controls">
  <button class="btn" onclick="expandAll()">Expand All</button>
  <button class="btn" onclick="collapseAll()">Collapse All</button>
  <button class="btn" id="filterSound" onclick="filterCategory('sound')">Sound Physics</button>
  <button class="btn" id="filterEar" onclick="filterCategory('ear')">Ear Anatomy</button>
  <button class="btn" id="filterTransduction" onclick="filterCategory('transduction')">Transduction</button>
  <button class="btn" id="filterPathway" onclick="filterCategory('pathway')">Neural Pathway</button>
  <button class="btn" id="filterAll" onclick="filterCategory('all')" class="active">All</button>
</div>

<div class="node-count" id="nodeCount"></div>

<div class="mindmap-container" id="mindmapContainer">

  <!-- NO RESULTS -->
  <div class="no-results" id="noResults">No matching topics found. Try a different search term.</div>

  <!-- ===== 1. WHAT IS SOUND ===== -->
  <div class="node theme-blue" data-category="sound" data-keywords="sound pressure waves amplitude frequency waveform phase condensation rarefaction vibrating air molecules">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üîä</div>
      <div class="node-title">What Is Sound?</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Definition</div>
        <div class="facts">
          <div class="fact">Pressure waves generated by <strong>vibrating air molecules</strong></div>
          <div class="fact">Like ripples spreading across water <strong>but in 3D</strong></div>
          <div class="fact">Composed of <strong>condensation</strong> (high pressure) and <strong>rarefaction</strong> (low pressure) zones</div>
          <div class="fact">Displacements of air molecules propagate outward as <strong>concentric waves</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">4 Key Features</div>
        <div class="facts">
          <div class="fact">‚ë† <strong>Amplitude</strong> (dB) ‚Äî correlates with <span class="highlight">loudness</span></div>
          <div class="fact">‚ë° <strong>Frequency</strong> (Hz) ‚Äî correlates with <span class="highlight">pitch</span></div>
          <div class="fact">‚ë¢ <strong>Waveform</strong> ‚Äî amplitude plotted across time</div>
          <div class="fact">‚ë£ <strong>Phase</strong> ‚Äî position in the wave cycle (Œ∏)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 2. COMPLEX SOUNDS ===== -->
  <div class="node theme-teal" data-category="sound" data-keywords="complex sounds birdsong speech fourier transform sinusoidal waves sonogram oscillogram wind periodic">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üéµ</div>
      <div class="node-title">Complex Sounds</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Periodic Sounds</div>
        <div class="facts">
          <div class="fact"><strong>Birdsong & speech</strong> contain highly periodic elements</div>
          <div class="fact">Can be modeled as the <strong>sum of sinusoidal waves</strong> of varying amplitudes, frequencies, and phases</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Fourier Transform</div>
        <div class="facts">
          <div class="fact">Decomposes a function of time into its <strong>constituent frequencies</strong></div>
          <div class="fact">The <strong>inner ear</strong> performs a biological equivalent of Fourier decomposition</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Visualization Tools</div>
        <div class="facts">
          <div class="fact"><strong>Sonogram</strong> ‚Äî frequency vs. time (top panel)</div>
          <div class="fact"><strong>Oscillogram</strong> ‚Äî amplitude vs. time (lower panel)</div>
          <div class="fact">Environmental sounds (e.g., <strong>wind</strong>) <em>lack</em> periodic structure</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 3. AUDIBLE SPECTRUM ===== -->
  <div class="node theme-yellow" data-category="sound" data-keywords="audible spectrum species humans 20hz 20khz bat porpoise echolocation predation age hearing loss">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üì°</div>
      <div class="node-title">The Audible Spectrum</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Species Specificity</div>
        <div class="facts">
          <div class="fact">Different species emphasize the frequency of <strong>their own vocalizations</strong></div>
          <div class="fact"><strong>Echolocation</strong> (bats, porpoises) ‚Üí requires high-frequency hearing</div>
          <div class="fact"><strong>Predation avoidance</strong> ‚Üí favors low-frequency detection</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Hearing Ranges</div>
        <div class="facts">
          <div class="fact"><strong>Humans:</strong> 20 Hz ‚Äì 20,000 Hz</div>
          <div class="fact"><strong>Porpoise:</strong> 66 ‚Äì 150,000 Hz</div>
          <div class="fact"><strong>Bat:</strong> 60 ‚Äì 130,000 Hz</div>
          <div class="fact"><strong>Moth:</strong> 330 ‚Äì 100,000 Hz</div>
          <div class="fact"><strong>Cat:</strong> 60 ‚Äì 65,000 Hz</div>
          <div class="fact"><strong>Bird:</strong> 66 ‚Äì 9,000 Hz</div>
          <div class="fact"><strong>Cricket:</strong> 55 ‚Äì 999 Hz</div>
          <div class="fact"><strong>Snake:</strong> 100 ‚Äì 1,000 Hz</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Aging Effects</div>
        <div class="facts">
          <div class="fact"><strong>Loss of high-frequency hearing</strong> with age</div>
          <div class="fact">Maximum for adults: <span class="highlight">15‚Äì17 kHz</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 4. AUDITORY FUNCTION OVERVIEW ===== -->
  <div class="node theme-green" data-category="ear" data-keywords="auditory function mechanoelectric transduction cochlea hair cells tonotopy neural activity">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">‚ö°</div>
      <div class="node-title">Auditory Function Overview</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Core Process</div>
        <div class="facts">
          <div class="fact">Transforms sound (air vibration patterns) into <strong>neural activity</strong></div>
          <div class="fact">Process called <strong>Mechanoelectric Transduction</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Sequential Steps</div>
        <div class="pathway">
          <span class="pathway-step" style="background:rgba(0,212,255,0.15); color:#00d4ff">External & Middle Ear</span>
          <span class="pathway-arrow">‚Üí</span>
          <span class="pathway-step" style="background:rgba(0,255,136,0.1); color:#00ff88">Cochlea</span>
          <span class="pathway-arrow">‚Üí</span>
          <span class="pathway-step" style="background:rgba(255,215,0,0.1); color:#ffd700">Hair Cells</span>
          <span class="pathway-arrow">‚Üí</span>
          <span class="pathway-step" style="background:rgba(255,107,53,0.1); color:#ff6b35">Neural Signals</span>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="facts">
          <div class="fact">External & middle ears <strong>collect and amplify</strong> sound waves, then transmit to <strong>fluid-filled cochlea</strong></div>
          <div class="fact">Hair cells transduce <strong>frequency, amplitude, and phase</strong> into electrical signals</div>
          <div class="fact">Acoustical decomposition ‚Üí <strong>tonotopic</strong> representation along cochlear length</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 5. EXTERNAL EAR ===== -->
  <div class="node theme-orange" data-category="ear" data-keywords="external ear pinna concha auditory meatus tympanic membrane eardrum speech 3khz elevation sound source">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üëÇ</div>
      <div class="node-title">The External Ear</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Structures</div>
        <div class="facts">
          <div class="fact"><strong>Pinna</strong> ‚Äî the outer visible flap</div>
          <div class="fact"><strong>Concha</strong> ‚Äî bowl-shaped depression</div>
          <div class="fact"><strong>Auditory meatus</strong> ‚Äî ear canal</div>
          <div class="fact"><strong>Tympanic membrane</strong> (eardrum) ‚Äî vibrates with sound pressure</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Functions</div>
        <div class="facts">
          <div class="fact">Gathers sound energy and <strong>focuses it on the tympanic membrane</strong></div>
          <div class="fact">Auditory meatus selectively boosts sound pressure <span class="highlight">30‚Äì100√ó</span> for frequencies around <strong>3 kHz</strong></div>
          <div class="fact">3 kHz is directly related to <strong>speech perception</strong></div>
          <div class="fact">Pinna & concha <strong>filter different frequencies</strong> to provide cues about <strong>elevation</strong> of sound source</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 6. MIDDLE EAR ===== -->
  <div class="node theme-pink" data-category="ear" data-keywords="middle ear ossicles malleus incus stapes tympanic membrane oval window impedance pressure boost tensor tympani stapedius bells palsy hyperacusis">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">ü¶¥</div>
      <div class="node-title">The Middle Ear</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Main Function</div>
        <div class="facts">
          <div class="fact">Boosts pressure from tympanic membrane to inner ear by <span class="highlight">~200√ó</span></div>
          <div class="fact">Necessary to transfer sound from <strong>low-impedance air</strong> to <strong>high-impedance aqueous</strong> environment of inner ear</div>
          <div class="fact"><em>Impedance</em> = a medium's resistance to movement</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Two Pressure-Boosting Mechanisms</div>
        <div class="facts">
          <div class="fact">‚ë† Focus force from <strong>large tympanic membrane ‚Üí small oval window</strong></div>
          <div class="fact">‚ë° <strong>Lever action</strong> of the ossicles</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">The Ossicles (3 Tiny Bones)</div>
        <div class="facts">
          <div class="fact"><strong>Malleus</strong> ‚Äî attached to tympanic membrane</div>
          <div class="fact"><strong>Incus</strong> ‚Äî middle bone</div>
          <div class="fact"><strong>Stapes</strong> ‚Äî connects to oval window of inner ear</div>
          <div class="fact">These are the <strong>smallest bones</strong> in the human body</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Protective Muscles</div>
        <div class="facts">
          <div class="fact"><strong>Tensor tympani</strong> ‚Äî innervated by Cranial Nerve <strong>V</strong></div>
          <div class="fact"><strong>Stapedius</strong> ‚Äî innervated by Cranial Nerve <strong>VII</strong></div>
          <div class="fact">Contract in response to <strong>loud sounds</strong> to limit ossicle movement</div>
          <div class="fact">Paralysis (Bell's palsy) ‚Üí <strong>hyperacusis</strong> (hypersensitivity to sound)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 7. INNER EAR / COCHLEA ===== -->
  <div class="node theme-purple" data-category="ear" data-keywords="inner ear cochlea snail tonotopy basilar membrane traveling wave apex base oval round window scala vestibuli tympani media helicotrema">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üêö</div>
      <div class="node-title">The Inner Ear & Cochlea</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Cochlea Structure</div>
        <div class="facts">
          <div class="fact">Small <strong>coiled tube</strong> (like a snail shell)</div>
          <div class="fact"><strong>Oval window</strong> & <strong>round window</strong> at the basal end</div>
          <div class="fact">Transforms pressure waves into <strong>neural impulses</strong> (sensory transduction)</div>
          <div class="fact">Acts as a <strong>mechanical frequency analyzer</strong> (tonotopy)</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Three Fluid Chambers (Scalae)</div>
        <div class="facts">
          <div class="fact"><strong>Scala vestibuli</strong> ‚Äî perilymph-filled, above cochlear partition</div>
          <div class="fact"><strong>Scala tympani</strong> ‚Äî perilymph-filled, below partition</div>
          <div class="fact"><strong>Scala media</strong> (cochlear duct) ‚Äî runs within the partition; contains endolymph</div>
          <div class="fact">Vestibuli & tympani join at the <strong>helicotrema</strong> (apex)</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Key Membranes</div>
        <div class="facts">
          <div class="fact"><strong>Basilar membrane</strong> ‚Äî supports organ of Corti; stiffness varies along length</div>
          <div class="fact"><strong>Tectorial membrane</strong> ‚Äî contacts stereocilia of hair cells</div>
          <div class="fact"><strong>Cochlear partition</strong> ‚Äî flexible structure running from base almost to apex</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Tonotopy & Traveling Wave</div>
        <div class="facts">
          <div class="fact">Stiffness of basilar membrane <strong>varies along its length</strong></div>
          <div class="fact"><strong>Base</strong> (oval window end) ‚Üí tuned to <span class="highlight">HIGH frequencies</span> (stiff)</div>
          <div class="fact"><strong>Apex</strong> ‚Üí tuned to <span class="highlight">LOW frequencies</span> (flexible)</div>
          <div class="fact">Traveling wave grows in amplitude until <strong>point of maximum displacement</strong></div>
          <div class="fact">Each location has a characteristic <strong>best frequency</strong></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 8. ORGAN OF CORTI ===== -->
  <div class="node theme-teal" data-category="transduction" data-keywords="organ corti hair cells inner outer stereocilia cranial nerve VIII afferent efferent otoacoustic amplifier">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üî¨</div>
      <div class="node-title">Organ of Corti</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Location</div>
        <div class="facts">
          <div class="fact">Hair cells located <strong>between basilar membrane and tectorial membrane</strong></div>
          <div class="fact">Sound-induced shearing force causes motion between these two membranes</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Inner Hair Cells (IHC)</div>
        <div class="facts">
          <div class="fact">~3,500 inner hair cells in a single row</div>
          <div class="fact">Receive <strong>afferent</strong> innervation from Cranial Nerve VIII</div>
          <div class="fact">Carry impulses <strong>toward the CNS</strong></div>
          <div class="fact">Primary <strong>sensory receptors</strong> of hearing</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Outer Hair Cells (OHC)</div>
        <div class="facts">
          <div class="fact">~12,000 outer hair cells in 3 rows</div>
          <div class="fact">Receive mostly <strong>efferent</strong> innervation</div>
          <div class="fact">Function as a <strong>mechanical amplifier</strong></div>
          <div class="fact">Responsible for <strong>otoacoustic emissions</strong> (sounds the ear generates)</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Stereocilia</div>
        <div class="facts">
          <div class="fact">Hair cells have <strong>stereocilia</strong> (hair-like processes)</div>
          <div class="fact">Protrude into the <strong>scala media</strong></div>
          <div class="fact">Each bundle has <strong>30 to a few hundred</strong> stereocilia, graded in height</div>
          <div class="fact">Also contains a <strong>kinocilium</strong> (tallest)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 9. MECHANOELECTRIC TRANSDUCTION ===== -->
  <div class="node theme-green full-width" data-category="transduction" data-keywords="mechanoelectrical transduction tip links K+ potassium calcium depolarization hyperpolarization receptor potential biphasic phase locking channels stereocilia damage hearing loss">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">‚öóÔ∏è</div>
      <div class="node-title">Mechanoelectrical Transduction</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(280px,1fr)); gap:16px; margin-top:4px;">
        <div>
          <div class="sub-title">Step-by-Step Mechanism</div>
          <div class="facts">
            <div class="fact">‚ë† Displacement of hair bundle toward <strong>tallest stereocilia (kinocilium)</strong></div>
            <div class="fact">‚ë° Stretches <strong>tip-links</strong> (filaments connecting adjacent stereocilia)</div>
            <div class="fact">‚ë¢ Opens <strong>cation-selective channels</strong> at the tips of tip-links</div>
            <div class="fact">‚ë£ <strong>K‚Å∫ influx</strong> (enters from endolymph) ‚Üí <strong>depolarizes</strong> hair cell</div>
            <div class="fact">‚ë§ Depolarization opens <strong>voltage-gated Ca¬≤‚Å∫ channels</strong></div>
            <div class="fact">‚ë• Ca¬≤‚Å∫ influx ‚Üí <strong>neurotransmitter release</strong> onto auditory nerve endings</div>
            <div class="fact">‚ë¶ Triggers <strong>action potential in CN VIII</strong></div>
          </div>
        </div>
        <div>
          <div class="sub-title">Opposite Movement</div>
          <div class="facts">
            <div class="fact">Movement <strong>away from kinocilium</strong> ‚Üí compresses tip-links</div>
            <div class="fact">Closes channels ‚Üí <strong>hyperpolarizes</strong> the cell</div>
            <div class="fact">Some channels open at <strong>rest</strong> ‚Üí receptor potential is <strong>biphasic</strong></div>
          </div>
          <div style="height:10px"></div>
          <div class="sub-title">Signal Properties</div>
          <div class="facts">
            <div class="fact">Stereocilia movement <strong>back & forth</strong> ‚Üí modulates ionic flow ‚Üí <strong>graded receptor potential</strong></div>
            <div class="fact">At <strong>low frequencies (&lt;3 kHz)</strong>: hair cell produces sinusoidal wave following stimulus</div>
            <div class="fact">At <strong>higher frequencies</strong>: responds with DC offset only, <em>does not</em> faithfully track frequency</div>
          </div>
        </div>
        <div>
          <div class="sub-title">Speed & Efficiency</div>
          <div class="facts">
            <div class="fact">Transduction is extremely fast: <span class="highlight">10 microseconds</span></div>
            <div class="fact">Essential for <strong>sound localization</strong></div>
            <div class="fact"><strong>Mechanical gating</strong> of ion channels (not second messengers) enables this speed</div>
          </div>
          <div style="height:10px"></div>
          <div class="sub-title">Damage & Hearing Loss</div>
          <div class="facts">
            <div class="fact"><strong>Stereocilia damage</strong> (e.g., by high-intensity sounds) ‚Üí <span class="highlight">irreversible</span> hearing loss</div>
            <div class="fact"><strong>Tip-link damage</strong> ‚Üí <span class="highlight">temporary</span> hearing loss (tip-links regenerate within hours)</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 10. IONIC BASIS ===== -->
  <div class="node theme-blue" data-category="transduction" data-keywords="ionic basis endolymph perilymph endocochlear potential stria vascularis K+ Na+ tight junctions 80mV repolarization scala media tympani">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üß™</div>
      <div class="node-title">Ionic Basis of Transduction</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Compartment Separation</div>
        <div class="facts">
          <div class="fact">Basal & apical surfaces separated by <strong>tight junctions</strong> ‚Üí separate ionic environments</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Endolymph (Scala Media ‚Äî Apical)</div>
        <div class="facts">
          <div class="fact"><strong>Rich in K‚Å∫</strong>, poor in Na‚Å∫</div>
          <div class="fact">Potential: <span class="highlight">+80 mV</span> (highly positive)</div>
          <div class="fact">Positive potential produced by ion pumping in <strong>stria vascularis</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Perilymph (Scala Tympani ‚Äî Basal)</div>
        <div class="facts">
          <div class="fact"><strong>Poor in K‚Å∫</strong>, rich in Na‚Å∫</div>
          <div class="fact">Potential: <span class="highlight">0 mV</span> (similar to other body fluids)</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Electrochemical Gradients</div>
        <div class="facts">
          <div class="fact"><strong>Endocochlear potential</strong> = difference between endolymph (+80 mV) and perilymph (0 mV)</div>
          <div class="fact">Inside of hair cell: <span class="highlight">‚àí45 mV</span> relative to perilymph</div>
          <div class="fact">Inside of hair cell: <span class="highlight">‚àí125 mV</span> relative to endolymph</div>
          <div class="fact">Large gradient drives <strong>K‚Å∫ into stereocilia</strong> when channels open</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Repolarization</div>
        <div class="facts">
          <div class="fact">Depolarization opens somatic <strong>K‚Å∫ and Ca¬≤‚Å∫ channels</strong></div>
          <div class="fact">Somatic K‚Å∫ channels ‚Üí K‚Å∫ <strong>efflux into perilymph</strong> (low K‚Å∫) ‚Üí repolarization</div>
          <div class="fact">System enables <strong>fast, energy-efficient repolarization</strong></div>
          <div class="fact">Ionic gradient maintained even during <strong>prolonged stimulation</strong></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 11. TUNING & TIMING ===== -->
  <div class="node theme-yellow" data-category="transduction" data-keywords="tuning curve characteristic frequency phase locking auditory nerve fiber firing rate spontaneous 3khz labeled line coding tonotopic">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üéØ</div>
      <div class="node-title">Tuning, Timing & Coding</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Phase-Locking</div>
        <div class="facts">
          <div class="fact">Hair cells only release neurotransmitter when <strong>depolarized</strong></div>
          <div class="fact">Auditory nerve fibers only fire in the <strong>rising phase</strong> of low-frequency sounds (&lt;3 kHz)</div>
          <div class="fact">This is called <strong>phase-locking</strong></div>
          <div class="fact">Provides <strong>temporal information</strong> compared between two ears for sound localization</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Tuning Curve</div>
        <div class="facts">
          <div class="fact">Plots <strong>minimum sound level</strong> required to increase a fiber's firing rate above baseline</div>
          <div class="fact"><strong>Characteristic frequency</strong> = the frequency at which a fiber responds to the <em>weakest</em> stimulus</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Labeled-Line Coding</div>
        <div class="facts">
          <div class="fact">Provided by <strong>tonotopic organization</strong> of the basilar membrane</div>
          <div class="fact">Hair-cell position along basilar membrane = <strong>frequency it responds to maximally</strong></div>
          <div class="fact"><strong>Each auditory fiber innervates only a single inner hair cell</strong> ‚Üí transmits only a narrow frequency band</div>
          <div class="fact">Tonotopic <strong>topography is preserved</strong> throughout the entire auditory system</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 12. AUDITORY PATHWAY ===== -->
  <div class="node theme-orange full-width" data-category="pathway" data-keywords="cochlear nucleus brainstem ascending pathway spiral ganglion anteroventral posteroventral dorsal superior olive inferior colliculus thalamus cortex">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üó∫Ô∏è</div>
      <div class="node-title">Ascending Auditory Pathway</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="pathway" style="margin-bottom:14px">
        <span class="pathway-step" style="background:rgba(255,107,53,0.15); color:#ff6b35">Cochlea (CN VIII)</span>
        <span class="pathway-arrow">‚Üí</span>
        <span class="pathway-step" style="background:rgba(0,212,255,0.1); color:#00d4ff">Spiral Ganglion</span>
        <span class="pathway-arrow">‚Üí</span>
        <span class="pathway-step" style="background:rgba(124,58,237,0.15); color:#9d5cf0">Cochlear Nucleus</span>
        <span class="pathway-arrow">‚Üí</span>
        <span class="pathway-step" style="background:rgba(0,255,136,0.1); color:#00ff88">Superior Olive</span>
        <span class="pathway-arrow">‚Üí</span>
        <span class="pathway-step" style="background:rgba(255,215,0,0.1); color:#ffd700">Inf. Colliculus</span>
        <span class="pathway-arrow">‚Üí</span>
        <span class="pathway-step" style="background:rgba(255,61,154,0.1); color:#ff3d9a">MGC Thalamus</span>
        <span class="pathway-arrow">‚Üí</span>
        <span class="pathway-step" style="background:rgba(78,205,196,0.1); color:#4ecdc4">Auditory Cortex</span>
      </div>
      <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(260px,1fr)); gap:14px;">
        <div>
          <div class="sub-title">CN VIII & Spiral Ganglion</div>
          <div class="facts">
            <div class="fact"><strong>Cochlear nerve</strong> = CN VIII (auditory nerve)</div>
            <div class="fact">Cell bodies located in the <strong>spiral (cochlear) ganglion</strong></div>
          </div>
        </div>
        <div>
          <div class="sub-title">Cochlear Nucleus (1st Relay)</div>
          <div class="facts">
            <div class="fact">Three divisions: <strong>Anteroventral</strong>, <strong>Posteroventral</strong>, <strong>Dorsal</strong></div>
            <div class="fact">Auditory nerve branches to innervate <strong>all 3 divisions</strong></div>
            <div class="fact">Tonotopic organization <strong>maintained</strong></div>
            <div class="fact"><strong>High bilateral connectivity</strong> supports binaural processing</div>
          </div>
        </div>
        <div>
          <div class="sub-title">Monaural Pathways</div>
          <div class="facts">
            <div class="fact">From cochlear nucleus ‚Üí <strong>bypass superior olive</strong></div>
            <div class="fact">Terminate in <strong>nuclei of the lateral lemniscus</strong> (contralateral)</div>
            <div class="fact">Respond to sound from <strong>one ear only</strong></div>
            <div class="fact">Cells encode <strong>onset</strong> and <strong>duration</strong> of sound</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 13. SOUND LOCALIZATION - ITD ===== -->
  <div class="node theme-purple" data-category="pathway" data-keywords="sound localization interaural time difference ITD MSO medial superior olive coincidence detector phase locking binaural 700 microseconds bipolar dendrites">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üìç</div>
      <div class="node-title">Sound Localization ‚Äî ITD</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Interaural Time Difference (ITD)</div>
        <div class="facts">
          <div class="fact">Difference in <strong>arrival time</strong> of sound at each ear</div>
          <div class="fact">Maximum ITD: <span class="highlight">700 microseconds</span></div>
          <div class="fact">Humans can detect ITDs as small as <span class="highlight">10 microseconds</span></div>
          <div class="fact">Artificial manipulation of ITDs ‚Üí perception of sound from <strong>leading ear's side</strong></div>
          <div class="fact">Requires <strong>phase-locking</strong> ‚Üí only for frequencies <strong>&lt; 3 kHz</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Medial Superior Olive (MSO)</div>
        <div class="facts">
          <div class="fact">Computes ITDs from <strong>bilateral anteroventral cochlear nuclei</strong></div>
          <div class="fact">Contains cells with <strong>bipolar dendrites</strong>: lateral (ipsilateral) and medial (contralateral)</div>
          <div class="fact">MSO neurons are <strong>coincidence detectors</strong> ‚Äî respond maximally when both inputs arrive simultaneously</div>
          <div class="fact">Different neurons are maximally sensitive to <strong>different ITDs</strong></div>
          <div class="fact">Axon projections vary in length systematically to <strong>create delays</strong></div>
          <div class="fact">Result: a <strong>map of sound location</strong> along the MSO</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Neuron Location Map (MSO)</div>
        <div class="facts">
          <div class="fact"><strong>Neuron E</strong> ‚Üí sounds on the LEFT</div>
          <div class="fact"><strong>Neuron C</strong> ‚Üí sounds at the MIDPOINT</div>
          <div class="fact"><strong>Neuron A</strong> ‚Üí sounds on the RIGHT</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 14. SOUND LOCALIZATION - IID ===== -->
  <div class="node theme-red" data-category="pathway" data-keywords="interaural intensity difference IID LSO lateral superior olive MNTB medial nucleus trapezoid body high frequency shadow 2khz excitation inhibition">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üîà</div>
      <div class="node-title">Sound Localization ‚Äî IID</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Interaural Intensity Difference (IID)</div>
        <div class="facts">
          <div class="fact">At frequencies <strong>&gt;2 kHz</strong>, the head acts as an <strong>acoustical obstacle</strong></div>
          <div class="fact">Wavelengths too short to bend around the head</div>
          <div class="fact">Creates an acoustical <strong>'shadow'</strong> of lower intensity at the far ear</div>
          <div class="fact">The <strong>intensity difference</strong> provides a cue about sound location</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Lateral Superior Olive (LSO)</div>
        <div class="facts">
          <div class="fact">Receives <strong>direct excitatory</strong> input from <strong>ipsilateral cochlear nucleus</strong></div>
          <div class="fact">Contralateral input arrives via <strong>inhibitory interneurons in MNTB</strong></div>
          <div class="fact">MNTB = <strong>Medial Nucleus of the Trapezoid Body</strong></div>
          <div class="fact">LSO neurons fire most strongly when sound is <strong>directly lateral and ipsilateral</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Excitation‚ÄìInhibition Logic</div>
        <div class="facts">
          <div class="fact">Sound from LEFT ‚Üí <strong>left LSO excited</strong> + right LSO inhibited (via MNTB)</div>
          <div class="fact">Net <strong>excitation from ipsilateral</strong> &gt; inhibition from contralateral ‚Üí signal sent upward</div>
          <div class="fact">Net <strong>inhibition from contralateral</strong> &gt; excitation ‚Üí no signal from right LSO</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 15. MULTIPLE LOCALIZATION MECHANISMS ===== -->
  <div class="node theme-teal" data-category="pathway" data-keywords="horizontal vertical elevation pinna spectral filtering dorsal cochlear nucleus MSO LSO plane sound location summary">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üß≠</div>
      <div class="node-title">Summary: Sound Localization</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Horizontal Plane</div>
        <div class="facts">
          <div class="fact"><strong>ITD</strong> ‚Üí low-frequency sounds ‚Üí processed in <strong>MSO</strong></div>
          <div class="fact"><strong>IID</strong> ‚Üí high-frequency sounds ‚Üí processed in <strong>LSO</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Vertical Plane (Elevation)</div>
        <div class="facts">
          <div class="fact">Spectral filtering by <strong>external pinna</strong> (outer ear)</div>
          <div class="fact">Processed in the <strong>dorsal cochlear nucleus</strong></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 16. INFERIOR COLLICULUS ===== -->
  <div class="node theme-green" data-category="pathway" data-keywords="inferior colliculus midbrain timing intensity frequency topographic representation auditory space integration binaural">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üéõÔ∏è</div>
      <div class="node-title">Inferior Colliculus (Midbrain)</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Inputs & Integration</div>
        <div class="facts">
          <div class="fact">Receives ascending pathways from: <strong>LSO, MSO, lateral lemniscus nuclei, cochlear nucleus</strong></div>
          <div class="fact">Converging information about <strong>timing, intensity, frequency</strong></div>
          <div class="fact">Computes a <strong>topographic representation of auditory space</strong></div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">Response Properties</div>
        <div class="facts">
          <div class="fact">Neurons respond best to sounds from a <strong>specific region of space</strong></div>
          <div class="fact">Also respond to <strong>complex temporal patterns</strong></div>
          <div class="fact">Preferences for specific <strong>frequency combinations</strong> or <strong>sound durations</strong></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 17. AUDITORY THALAMUS ===== -->
  <div class="node theme-yellow" data-category="pathway" data-keywords="auditory thalamus medial geniculate complex MGC thalamus tonotopic selective frequencies time intervals brainstem">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üèõÔ∏è</div>
      <div class="node-title">Auditory Thalamus (MGC)</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="facts">
          <div class="fact">All ascending auditory info must pass through the <strong>Medial Geniculate Complex (MGC)</strong> before cortex</div>
          <div class="fact">In some animals, tonotopic brainstem inputs converge to generate <strong>selective responses to combinations of frequencies</strong></div>
          <div class="fact">Also responds to specific <strong>time intervals between frequencies</strong></div>
          <div class="fact"><strong>Ventral MGC</strong> ‚Üí primary auditory cortex</div>
          <div class="fact"><strong>Dorsal MGC</strong> ‚Üí belt & parabelt (secondary auditory cortex)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 18. AUDITORY CORTEX ===== -->
  <div class="node theme-pink full-width" data-category="pathway" data-keywords="auditory cortex primary secondary belt parabelt tonotopic map EE EI binaural wernicke speech music lateralization pitch perception temporal order vocalization">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üß†</div>
      <div class="node-title">The Auditory Cortex</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(270px,1fr)); gap:14px; margin-top:4px;">
        <div>
          <div class="sub-title">Major Subdivisions</div>
          <div class="facts">
            <div class="fact"><strong>Primary auditory cortex</strong> (A1) ‚Äî receives from ventral MGC; precise tonotopic map; point-to-point input</div>
            <div class="fact"><strong>Belt areas</strong> ‚Äî secondary cortex; diffuse input from MGC + primary cortex; less precise tonotopy</div>
            <div class="fact"><strong>Parabelt areas</strong> ‚Äî tertiary; even more diffuse</div>
            <div class="fact">Strong <strong>reciprocal connections</strong> between belt and core</div>
          </div>
        </div>
        <div>
          <div class="sub-title">Cortical Organization</div>
          <div class="facts">
            <div class="fact">Contains <strong>tonotopic maps</strong> of the cochlea</div>
            <div class="fact"><strong>EE cells</strong> ‚Äî excited by input from <em>both</em> ears</div>
            <div class="fact"><strong>EI cells</strong> ‚Äî excited by one ear, <em>inhibited</em> by other</div>
            <div class="fact">EE and EI cells arranged in <strong>alternating stripes</strong> (function unknown)</div>
          </div>
        </div>
        <div>
          <div class="sub-title">Functions</div>
          <div class="facts">
            <div class="fact">Essential for <strong>conscious perception</strong> of sound, including speech recognition</div>
            <div class="fact">Secondary regions ‚Üí important for <strong>pitch perception</strong> (fundamental to music)</div>
            <div class="fact">Pitch perception allows differentiation of <strong>two overlapping sounds</strong></div>
            <div class="fact">Important for <strong>temporal order</strong> of sounds (speech perception)</div>
            <div class="fact">Some neurons respond to species-specific sounds but not the same sound <strong>played in reverse</strong></div>
            <div class="fact">Bilateral damage ‚Üí severe problems with temporal order and <strong>complex acoustical signals</strong> (e.g., music)</div>
          </div>
        </div>
        <div>
          <div class="sub-title">Integration & Language</div>
          <div class="facts">
            <div class="fact">Integrates <strong>non-auditory information</strong> from cortical & subcortical regions</div>
            <div class="fact">Activated by <strong>motor gestures</strong> (vocal and manual ‚Äî especially in musicians!)</div>
            <div class="fact"><strong>Wernicke's area</strong> ‚Äî critical for language comprehension; continuous with secondary auditory area</div>
            <div class="fact">Cortex activity <strong>diminished just before vocalization</strong> ‚Äî filters anticipated acoustical movements</div>
          </div>
        </div>
        <div>
          <div class="sub-title">Lateralization</div>
          <div class="facts">
            <div class="fact"><strong>Speech</strong> ‚Üí activates <span class="highlight">LEFT</span> auditory cortex more strongly</div>
            <div class="fact"><strong>Music</strong> ‚Üí activates <span class="highlight">RIGHT</span> auditory cortex more strongly</div>
            <div class="fact">Significant <strong>inter-individual differences</strong> in lateralization</div>
            <div class="fact">Both core and belt regions show lateralization effects</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===== 19. LEARNING GUIDE ===== -->
  <div class="node theme-blue" data-category="pathway" data-keywords="learning guide sensory systems signal transduction pathway cortex mapping rules study">
    <div class="node-header" onclick="toggleNode(this)">
      <div class="node-icon">üìö</div>
      <div class="node-title">Learning Guide: Sensory Systems</div>
      <div class="toggle-btn">‚ñº</div>
    </div>
    <div class="node-body">
      <div class="sub-section">
        <div class="sub-title">Key Questions to Master</div>
        <div class="facts">
          <div class="fact">‚ë† <strong>Mechanism of signal transduction</strong> ‚Äî how is a physical stimulus converted to neural activity?</div>
          <div class="fact">‚ë° <strong>Anatomical/synaptic pathway to the cortex</strong> ‚Äî what are each relay station and what does each do?</div>
          <div class="fact">‚ë¢ <strong>Mapping rules represented</strong> ‚Äî what topographic organizations exist (e.g., tonotopy)?</div>
        </div>
      </div>
      <div class="divider"></div>
      <div class="sub-section">
        <div class="sub-title">For This Lecture ‚Äî Quick Recall</div>
        <div class="facts">
          <div class="fact"><strong>Transduction:</strong> Tip-link ‚Üí K‚Å∫ channel ‚Üí depolarization ‚Üí Ca¬≤‚Å∫ ‚Üí NT release</div>
          <div class="fact"><strong>Pathway:</strong> CN VIII ‚Üí Spiral ganglion ‚Üí Cochlear nucleus ‚Üí Superior olive / lemniscus ‚Üí Inferior colliculus ‚Üí MGC ‚Üí Auditory cortex</div>
          <div class="fact"><strong>Mapping:</strong> Tonotopy (frequency mapped along basilar membrane and preserved all the way to cortex)</div>
        </div>
      </div>
    </div>
  </div>

</div>

<button class="scroll-top" id="scrollTopBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>

<script>
  // Toggle individual node
  function toggleNode(header) {
    const node = header.parentElement;
    node.classList.toggle('open');
  }

  // Expand all visible nodes
  function expandAll() {
    document.querySelectorAll('.node:not(.hidden)').forEach(n => n.classList.add('open'));
  }

  // Collapse all
  function collapseAll() {
    document.querySelectorAll('.node').forEach(n => n.classList.remove('open'));
  }

  // Category filter
  let activeCategory = 'all';
  function filterCategory(cat) {
    activeCategory = cat;
    document.querySelectorAll('.btn[id^="filter"]').forEach(b => b.classList.remove('active'));
    const btn = document.getElementById('filter' + cat.charAt(0).toUpperCase() + cat.slice(1));
    if (btn) btn.classList.add('active');
    applyFilters();
  }

  // Search filter
  function filterNodes() {
    applyFilters();
  }

  function applyFilters() {
    const query = document.getElementById('searchInput').value.toLowerCase().trim();
    const nodes = document.querySelectorAll('.node');
    let visibleCount = 0;

    nodes.forEach(node => {
      const catMatch = activeCategory === 'all' || node.dataset.category === activeCategory;
      const keywords = (node.dataset.keywords || '').toLowerCase();
      const titleText = node.querySelector('.node-title').textContent.toLowerCase();
      const bodyText = node.querySelector('.node-body') ? node.querySelector('.node-body').textContent.toLowerCase() : '';
      const searchMatch = !query || keywords.includes(query) || titleText.includes(query) || bodyText.includes(query);

      if (catMatch && searchMatch) {
        node.classList.remove('hidden');
        visibleCount++;
        // Highlight search terms
        if (query) {
          node.classList.add('open');
        }
      } else {
        node.classList.add('hidden');
      }
    });

    const noResults = document.getElementById('noResults');
    noResults.style.display = visibleCount === 0 ? 'block' : 'none';

    const countEl = document.getElementById('nodeCount');
    countEl.textContent = visibleCount + ' topic' + (visibleCount !== 1 ? 's' : '') + ' shown';
  }

  // Scroll to top button
  window.addEventListener('scroll', () => {
    const btn = document.getElementById('scrollTopBtn');
    btn.classList.toggle('visible', window.scrollY > 400);
  });

  // Initial count
  applyFilters();

  // Open first node by default
  const firstNode = document.querySelector('.node');
  if (firstNode) firstNode.classList.add('open');
</script>

</body>
</html>
